(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{216:function(e){e.exports=JSON.parse('{"projectId":"903a645a-9f8a-4534-ab8f-3db93b0c0358","modelId":"e8cdfc88-3c2a-461c-bc2d-7e5675f0e13b","description":"Step into our Reality","title":"BBC Metaverse"}')},258:function(e,t){},456:function(e,t){},458:function(e,t){},530:function(e,t){},531:function(e,t){},678:function(e,t){},680:function(e,t){},708:function(e,t){},710:function(e,t){},711:function(e,t){},716:function(e,t){},718:function(e,t){},724:function(e,t){},726:function(e,t){},745:function(e,t){},757:function(e,t){},760:function(e,t){},841:function(e,t,n){},842:function(e,t,n){},847:function(e,t,n){},854:function(e,t,n){"use strict";n.r(t);var o=n(21);window.process=o;var r,i,c,s,a,l,u,d,h,j,b=n(2),v=n(102),f=n.n(v),p=n(179),x=n(287),O=n(109),m=n(173),g=n(174),C=n(36),y=n(122),S=n(425),L=n(290),w=n(873),k=n(160),I=n(426),P=n.n(I),E=(n(841),n(216)),R=(n(842),n(13)),T=E,N=function(e){return Object(R.jsx)("div",{id:"launchContainer",children:Object(R.jsx)("section",{id:"bg-dark-30","data-background":"assets/images/showcase_bg.jpg",children:Object(R.jsx)("div",{id:"titan-caption",children:Object(R.jsxs)("div",{id:"caption-content",children:[Object(R.jsx)("div",{id:"font-alt",children:"BBC. Metaverse."}),Object(R.jsx)("div",{id:"font-alt-two",children:T.description}),Object(R.jsx)(w.a,{id:"btn-loo",onClick:function(){return e.Launch()},children:"ENTER"})]})})})})},A=C.LoggerProvider.getLogger("client"),M=E,U=function(){function e(){Object(g.a)(this,e),this.LaunchType=void 0,this.ProjectId=void 0,this.ModelId=void 0,this.Version=void 0,this.EnvironmentId=void 0,this.Endpoint=void 0,this.ForceRelay=!1,this.UseNativeTouchEvents=void 0,this.UsePointerLock=void 0,this.PointerLockRelease=void 0}return Object(m.a)(e,[{key:"isValid",value:function(){return!!this.ProjectId&&!!this.ModelId}}]),e}(),V=function(e){return e.StreamerStatus===C.StreamerStatus.Connected||e.StreamerStatus===C.StreamerStatus.Completed?Object(R.jsx)("div",{}):(e.StreamerStatus===C.StreamerStatus.NotSupported&&(t=Object(R.jsx)("div",{children:Object(R.jsx)("h3",{children:"Your browser does not support the necessary WebRTC capabilities."})})),t=e.LaunchRequestStatus.status===C.LaunchStatusType.Unavailable||e.LaunchRequestStatus.status===C.LaunchStatusType.Error||e.StreamerStatus===C.StreamerStatus.Failed?Object(R.jsxs)("div",{children:[Object(R.jsx)("h3",{children:"The experience is presently unavailable."}),Object(R.jsx)("h3",{children:"Please refresh to request a new session."})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)("svg",{className:"logo",viewBox:"410.5 265.5 90.12054 104.02344",children:Object(R.jsx)("g",{fillRule:"nonzero",children:Object(R.jsx)("path",{d:"M 495.4032 310.1983 L 484.1122 336.6803 C 483.9952 336.9373 483.8712 337.1633 483.7452 337.3853 L 459.3812 304.5723 L 477.0682 270.8543 C 478.1542 271.7123 478.9182 272.8703 479.6262 273.9833 L 480.0632 274.6613 L 495.0372 299.2173 C 495.9882 300.8173 496.5252 302.6543 496.5952 304.5553 C 496.6622 306.4163 496.2812 308.3503 495.4032 310.1983 M 448.9282 347.3083 C 448.5962 350.9113 448.2602 354.5423 447.7532 358.1613 C 447.2272 361.2263 446.4642 363.1463 445.4102 364.2293 C 444.4962 365.1683 443.2082 365.5153 441.5212 365.5073 L 434.7122 365.5073 C 431.3752 365.3863 430.9012 363.7163 429.4212 358.4833 C 429.1172 357.4093 428.7792 356.2143 428.4382 355.0733 C 428.3492 354.9843 419.5002 325.7033 417.1802 318.0873 L 437.5242 340.7223 C 438.4982 341.7353 439.5882 342.6203 440.7782 343.2493 C 441.9062 343.8473 443.1252 344.2143 444.4232 344.2493 L 449.2172 344.2233 C 449.1232 345.2093 449.0262 346.2453 448.9282 347.3083 M 475.7822 340.0613 C 475.7812 340.0613 475.7802 340.0623 475.7782 340.0623 C 475.7772 340.0623 475.7762 340.0613 475.7742 340.0613 L 444.5222 340.2333 C 443.8962 340.2143 443.2662 340.0153 442.6522 339.6903 C 441.8882 339.2863 441.1522 338.6853 440.4682 337.9813 L 416.1402 310.9083 C 415.7802 310.5073 415.4802 310.1443 415.2322 309.7873 L 455.7092 306.3673 L 480.4472 339.6853 C 479.2762 339.9463 477.7772 340.0643 475.7822 340.0613 M 430.4182 282.5003 C 431.9252 280.3873 433.5952 278.7143 435.5382 277.4503 C 437.4782 276.1883 439.7352 275.3073 442.4212 274.7693 L 471.2542 269.7603 C 471.9712 269.6263 472.6072 269.5813 473.2012 269.5833 L 456.0442 302.2923 C 456.0402 302.2933 456.0382 302.2953 456.0352 302.2963 L 414.7762 305.7823 C 414.9612 305.1193 415.2262 304.4623 415.6132 303.8563 L 430.4182 282.5003 M 498.4782 297.1393 C 494.8552 289.8933 487.6422 278.9223 483.0092 271.8113 C 480.7722 268.3063 478.2572 264.3733 470.5452 265.8003 L 441.6342 270.8183 C 438.4552 271.4533 435.7392 272.5253 433.3502 274.0793 C 430.9652 275.6313 428.9412 277.6463 427.1432 280.1703 C 422.2182 287.3093 417.2882 294.6593 412.2272 301.6833 C 411.5152 302.7953 411.0152 304.0283 410.7322 305.2793 C 410.5422 306.1473 410.5022 307.0243 410.5322 307.8933 C 410.5272 307.9843 410.4932 308.0683 410.5012 308.1613 C 410.5022 308.1823 410.5152 308.1983 410.5172 308.2183 C 410.5192 308.2443 410.5082 308.2683 410.5112 308.2943 C 410.5252 308.4063 410.5592 308.4853 410.5762 308.5923 C 410.5942 308.7653 410.5812 308.9443 410.6092 309.1163 C 411.0622 311.8913 412.0262 315.0063 412.9092 317.8673 L 424.5782 356.2233 C 424.9802 357.5693 425.2792 358.6233 425.5472 359.5703 C 427.6332 366.9413 428.3002 369.2943 434.5702 369.5223 L 441.5212 369.5233 C 444.2902 369.5343 446.5132 368.8593 448.2922 367.0323 C 449.9312 365.3483 451.0502 362.7473 451.7222 358.8383 L 451.7302 358.7753 C 452.2332 355.1963 452.5822 351.4193 452.9282 347.6713 C 453.0292 346.5673 453.1382 345.4223 453.2582 344.2013 L 475.7902 344.0773 C 475.7912 344.0773 475.7912 344.0763 475.7912 344.0763 C 479.2552 344.0813 481.6612 343.7543 483.4982 342.9103 C 485.5602 341.9623 486.8052 340.4913 487.7962 338.2863 L 499.0572 311.8803 C 500.2042 309.4543 500.7002 306.8953 500.6102 304.4133 C 500.5162 301.8253 499.7812 299.3223 498.4782 297.1393"})})}),Object(R.jsx)("h3",{children:"Please wait, your session is loading."})]}),Object(R.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(R.jsx)("div",{style:{textAlign:"center"},children:t})}));var t},q=function(e){var t=Object(b.useRef)(null),n=Object(L.b)(),o="iOS"===y.System.Browser().os&&!window.navigator.userAgent.includes("iPad");return Object(R.jsx)("div",{style:{height:"100%"},children:Object(R.jsxs)(L.a,{handle:n,children:[Object(R.jsx)(y.IdleTimeout,{Status:e.StreamerStatus,WarningThreshold:300,ExitThreshold:120,WarningCallback:n.exit,ExitCallback:function(){return window.location.reload()}}),Object(R.jsx)(V,{LaunchRequestStatus:e.LaunchRequestStatus,StreamerStatus:e.StreamerStatus}),Object(R.jsx)(y.VideoStream,{VideoRef:t,Emitter:e.InputEmitter,Stream:e.VideoStream,UseNativeTouchEvents:e.UseNativeTouchEvents,UsePointerLock:e.UsePointerLock,PointerLockRelease:e.PointerLockRelease}),Object(R.jsx)(w.a,{onClick:n.enter,style:{position:"absolute",top:10,right:10},className:o||n.active||e.StreamerStatus!==C.StreamerStatus.Connected?"hidden":"",children:Object(R.jsx)(k.a,{name:"expand"})}),e.StreamerStatus!==C.StreamerStatus.Connected&&Object(R.jsx)("img",{alt:"PureWeb Logo",src:"/pureweb.svg",style:{width:100,position:"absolute",bottom:50,right:10}})]})})},B=new Audio;B.autoplay=!0,B.volume=.5;var F=S.parse(window.location.search),W=new U;W.LaunchType=null!==(r=F.launchType)&&void 0!==r?r:M.launchType,F.collaboration&&"true"==F.collaboration&&(W.LaunchType="local"),W.Endpoint=null!==(i=F.endpoint)&&void 0!==i?i:M.endpoint,W.ProjectId=null!==(c=F.projectId)&&void 0!==c?c:M.projectId,W.ModelId=null!==(s=F.modelId)&&void 0!==s?s:M.modelId,W.Version=null!==(a=F.version)&&void 0!==a?a:M.version,W.EnvironmentId=null!==(l=F.environmentId)&&void 0!==l?l:M.environmentId,W.UsePointerLock=null===(u=void 0===F.usePointerLock?M.usePointerLock:"true"===F.usePointerLock)||void 0===u||u,W.PointerLockRelease=null===(d=void 0===F.pointerLockRelease?M.pointerLockRelease:"true"===F.pointerLockRelease)||void 0===d||d,W.ForceRelay=null!==(h=void 0!==F.forceRelay)&&void 0!==h&&h,W.UseNativeTouchEvents=null!==(j=void 0===F.useNativeTouchEvents?M.useNativeTouchEvents:"true"===F.useNativeTouchEvents)&&void 0!==j&&j;var z=new C.PlatformNext;z.initialize({endpoint:W.Endpoint||"https://api.pureweb.io"});var D=function(){var e=Object(b.useState)(!1),t=Object(O.a)(e,2),n=t[0],o=t[1],r=Object(b.useState)(new C.UndefinedModelDefinition),i=Object(O.a)(r,2),c=i[0],s=i[1],a=Object(b.useState)(),l=Object(O.a)(a,2),u=l[0],d=l[1],h=Object(b.useState)(),j=Object(O.a)(h,2),v=j[0],f=j[1],m=C.DefaultStreamerOptions;P()(Object(x.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W.ProjectId){e.next=20;break}return A.info("Initializing available models: "+W.ProjectId),e.prev=2,e.next=5,z.useAnonymousCredentials(W.ProjectId,W.EnvironmentId);case 5:return e.next=7,z.connect();case 7:return A.info("Agent Connected: "+z.agent.id),m.iceServers=z.agent.serviceCredentials.iceServers,m.forceRelay=W.ForceRelay,e.next=12,z.getModels();case 12:t=e.sent,d(t),A.debug("Available models",t),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])}))),[W]),Object(b.useEffect)((function(){if(null!==u&&void 0!==u&&u.length){var e=u.filter((function(e){if(W.ModelId===e.id){if(W.Version&&W.Version===e.version)return!0;if(!W.Version&&e.active)return!0}return!1}));null!==e&&void 0!==e&&e.length?s(e[0]):o(!0)}}),[u]);var g={regionOverride:F.regionOverride,virtualizationProviderOverride:F.virtualizationProviderOverride},S=Object(y.useLaunchRequest)(z,c,g),L=Object(O.a)(S,3),w=L[0],k=L[1],I=L[2],E=Object(y.useStreamer)(z,k,m),T=Object(O.a)(E,5),M=T[0],U=T[1],V=T[2],D=T[3],J=T[4],Y=Object(b.useState)(!1),$=Object(O.a)(Y,2),_=$[0],G=$[1];Object(b.useEffect)((function(){M===C.StreamerStatus.Failed&&z.disconnect()}),[M]),D&&(B.srcObject=D);var H=function(){var e=Object(x.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(!0),B.load(),"local"===W.LaunchType){e.next=11;break}return e.prev=3,e.next=6,I();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),f(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return Object(b.useEffect)((function(){A.info("Status",w,M)}),[w,M]),Object(b.useEffect)((function(){var e=J.subscribe((function(e){A.info("Message: "+e)}),(function(e){A.error(e)}));return function(){e.unsubscribe()}}),[J]),W.isValid()?n?Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("span",{style:{color:"chocolate"},children:"The model that you have requested does not exist"})}):v?Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("span",{style:{color:"chocolate"},children:"It appears the requested model is currently not online as per your set schedule. Please contact support if it should be available."})}):M===C.StreamerStatus.Disconnected?Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("h2",{style:{color:"chocolate"},children:"Disconnected from stream"})}):M===C.StreamerStatus.Failed?Object(R.jsxs)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:[Object(R.jsx)("h2",{style:{color:"chocolate"},children:"Failure during stream"}),Object(R.jsx)("h2",{style:{color:"chocolate"},children:"Please refresh to request a new session"})]}):M===C.StreamerStatus.Withdrawn?Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("h2",{style:{color:"chocolate"},children:"Streamer contribution withdrawn"})}):_?Object(R.jsx)(q,{VideoStream:V,StreamerStatus:M,LaunchRequestStatus:w,InputEmitter:U,UseNativeTouchEvents:W.UseNativeTouchEvents,UsePointerLock:W.UsePointerLock,PointerLockRelease:W.PointerLockRelease}):"local"===W.LaunchType||u?"local"===W.LaunchType||null!==u&&void 0!==u&&u.length?Object(R.jsx)(N,{Launch:H}):Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("h2",{style:{color:"chocolate"},children:"No models are currently available in this environment."})}):Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsx)("h2",{style:{color:"chocolate"},children:"Initializing..."})}):Object(R.jsx)("div",{style:{display:"flex",height:"100%",overflow:"none",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:Object(R.jsxs)("p",{style:{color:"chocolate"},children:["Your client has one or more configuration errors. Please consult the"," ",Object(R.jsx)("a",{href:"https://www.npmjs.com/package/@pureweb/cra-template-pureweb-client",children:" README "})," for details on how to configure the client template."]})})},J=function(){return y.System.IsBrowserSupported()?Object(R.jsx)(D,{}):Object(R.jsx)("div",{className:"ui red segment center aligned basic",children:Object(R.jsx)("h2",{className:"header",children:"Your browser is currently unsupported"})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(846),n(847);f.a.render(Object(R.jsx)(J,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[854,1,2]]]);
//# sourceMappingURL=main.7d8fd912.chunk.js.map